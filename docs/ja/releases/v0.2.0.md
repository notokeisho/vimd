# v0.2.0 - Dual Parser System

[English](../../en/releases/v0.2.0-en.md) | 日本語

## 概要

vimd v0.2.0 でデュアルパーサーシステムを導入した。
dev コマンドは markdown-it、build コマンドは pandoc をデフォルトで使用する。

## ベンチマーク

### 計測環境

- Platform: darwin arm64
- Node.js: v20.19.5
- 計測回数: 5回の平均

### 結果

| ファイル | 行数 | markdown-it | pandoc | 高速化 |
|---------|------|-------------|--------|--------|
| sample-100.md | 106 | 1.59ms | 52.09ms | 32.7x |
| sample-500.md | 514 | 4.02ms | 96.03ms | 23.9x |
| sample-1000.md | 952 | 5.24ms | 333.72ms | 63.7x |

### 考察

- markdown-it は pandoc より 24〜64 倍高速
- ファイルサイズが大きいほど差が顕著
- 1000 行のファイルで 333ms → 5ms に短縮

## 新機能

### CLI オプション

```bash
# dev コマンドで pandoc を使用
vimd dev document.md --pandoc

# build コマンドで markdown-it を使用 (高速ビルド)
vimd build document.md --fast
```

### 設定オプション

```javascript
// ~/.vimd/config.js
export default {
  devParser: 'markdown-it',   // dev コマンドのデフォルト
  buildParser: 'pandoc',      // build コマンドのデフォルト
}
```

## 技術詳細

### パーサー構成

| パーサー | 用途 | 特徴 |
|---------|------|------|
| markdown-it | dev (デフォルト) | 高速、pandoc 不要、GFM サポート |
| pandoc | build (デフォルト) | 高品質、多機能、数式対応 |

### markdown-it プラグイン

- highlight.js: シンタックスハイライト
- markdown-it-task-lists: タスクリスト
- markdown-it-strikethrough-alt: 取り消し線

## 後方互換性

- 既存の設定ファイルはそのまま動作する
- pandoc がインストールされていなくても dev コマンドは動作する
- build コマンドで pandoc を使用する場合は従来通り pandoc が必要
